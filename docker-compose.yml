version: '3.8'

services:
  app:
    image: node:latest
    container_name: quasar-dev-container
    tmpfs:
      - /app/.local/share/code-server
    volumes:
      - ./online-ide:/app
    working_dir: /app
    ports:
      - "8080:8080"
    command: /bin/sh -c "npm install -g @quasar/cli && npm install && quasar dev -p 8080"

  code-server:
    image: codercom/code-server:latest
    volumes:
      - ./online-ide:/home/coder
      - /app/node_modules
    ports:
      - "8081:8081" # Expose code-server on port 8081
    environment:
      - PASSWORD=your-password-here # Set a password for access or use --auth none to disable authentication
      - GIT_USER=your-name
      - GIT_EMAIL=your-email@example.com
    command: ["--auth", "none", "--bind-addr", "0.0.0.0:8081", "--disable-telemetry"]